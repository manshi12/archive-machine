<!DOCTYPE html>
<html>
<head>
  <title>CREDIT FILE/AUTHORIZATIONS: User Transfer</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #F0F0F0;
    }
    .header-bar {
      background-color: #4682B4;
      color: white;
      padding: 5px 0;
      width: 100%;
    }
    .BgWhite { background-color: #FFFFFF; }
    .BgPaleOrange { background-color: #FFCC99; }
    .SubHeading { 
      font-weight: bold;
      padding: 5px;
      font-size: 12px;
    }
    .BodyText { 
      font-size: 12px; 
    }
    .title-container {
      background-color: #4682B4; 
      color: white;
      border-radius: 4px;
      padding: 5px 15px;
      display: inline-block;
    }
    .titlename { 
      font-weight: bold; 
      font-size: 14px;
    }
    input[type="button"] {
      background-color: #4682B4;
      color: white;
      border: none;
      padding: 5px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    .warning {
      color: red;
      font-size: 13px;
      text-align: left;
      margin: 10px 0;
    }
    .form-container {
      width: 65%;
      margin: 0 auto;
      background-color: #FFFFFF;
    }
    .option-box {
      text-align: left;
      border: 1px solid #000;
      padding: 10px;
      width: 200px;
      margin-left: 0;
      background-color: #F5F5F5;
    }
    .button-container {
      text-align: center;
      margin: 20px 0;
    }
    input[type="text"] {
      border: 1px solid #AAAAAA;
      background-color: #FFFFFF;
      padding: 2px;
    }
    table {
      border-collapse: collapse;
    }
  </style>
  <script type="text/javascript">
  // Initialize default state without using window.onload
  function initForm() {
    // Set default state - Sub-group selected
    if (document.getElementById('sub_group_option')) {
      document.getElementById('sub_group_option').checked = true;
      toggleFields();
    }
    return true;
  }

    // Cross-browser ready event polyfill
function domReady(callback) {
  // Internet Explorer
  if (document.attachEvent) {
    // For IE browsers
    if (document.readyState === "complete" || document.readyState === "loaded") {
      callback();
    } else {
      document.attachEvent("onreadystatechange", function() {
        if (document.readyState === "complete") {
          callback();
        }
      });
    }
  } 
  // Modern browsers
  else if (document.addEventListener) {
    document.addEventListener("DOMContentLoaded", callback, false);
  }
  // Fallback
  else {
    window.onload = callback;
  }
}
  
  // Function to toggle fields based on selection
 function toggleFields() {
  if (document.getElementById('le_option') && document.getElementById('le_option').checked) {
    // If LE is selected
    document.getElementById('subgroup_row').style.display = 'none';
    document.getElementById('le_row').style.display = '';
    document.getElementById('codria_row').style.display = 'none';
    document.getElementById('codria_le_row').style.display = '';
    // **Hide Reset button when switching to LE option**
    document.getElementById('resetButton').style.display = 'none';
  } else {
    // If Sub-group is selected
    document.getElementById('subgroup_row').style.display = '';
    document.getElementById('le_row').style.display = 'none';
    document.getElementById('codria_row').style.display = '';
    document.getElementById('codria_le_row').style.display = 'none';
  }
}
    // Call domReady with your initialization function
    domReady(initForm);
  
  // Function to handle fetch details
  function fetchDetails() {
    var codriaValue;
    
    if (document.getElementById('le_option') && document.getElementById('le_option').checked) {
      codriaValue = document.getElementById('codria_le_code').value;
    } else {
      codriaValue = document.getElementById('codria_code').value;
    }
    
    console.log("Fetching details with CODRIA value: " + codriaValue);
    // Your fetch logic here
  }
  
  // Function to handle input field search
  function inputfieldsearch(fieldId) {
    console.log("Input field search triggered for: " + fieldId);
    // Your input field search logic here
  }
  </script>
</head>
<body onload="initForm()">
<form name="CF10" id="CF10" style='width:100%; text-align:center;'>
  <input type="hidden" name="firstVisit" id="firstVisit" value="">
  <input type="hidden" name="codUsr" id="codUsr" value="">
  <input type="hidden" name="todo_type" id="todo_type" value="">
  <input type="hidden" name="codgrp" id="codgrp" value="">
  <input type="hidden" name="CF_Level" id="CF_Level" value="">
  
  <table class="form-container" border="0" cellspacing="0" cellpadding="0">
    <tr class="BgWhite"><td colspan="4">&nbsp;</td></tr>
    <tr class="BgWhite"><td colspan="4">&nbsp;</td></tr>
    
    <tr class="BgWhite" valign="top" align="center">
      <td colspan="4">
        <div class="title-container"><span class="titlename">CREDIT FILE/AUTHORIZATIONS: User Transfer</span></div>
      </td>
    </tr>
    
    <tr class="BgWhite"><td colspan="4">&nbsp;</td></tr>
    <tr class="BgWhite"><td colspan="4">&nbsp;</td></tr>
    
    <tr><td colspan="4">
      <p class="warning"> * Only few status are allowed to transfer. Creation/Intermediate Validation/Final Validation/Notified.</p>
    </td></tr>
    
    <tr class="BgPaleOrange"><td height="13" colspan="4" class="SubHeading">Counterparty</td></tr>
    
    <!-- Sub-group section -->
    <tr bgcolor="#FFCC99" id="subgroup_row">
      <td height="28" class="BodyText" width="25%" align="left" nowrap>
        Sub-group Code:
      </td>
      <td height="28" class="BodyText" width="25%" id="subgroupname_code">
        <input type="text" name="txtsgr_code" id="txtsgr_code" size="12" maxlength="8" class="BodyText" onchange="inputfieldsearch(this.id);">
      </td>
      <td width="15%" height="31" class="BodyText" align="right" nowrap>
        Sub-group Name:
      </td>
      <td width="35%" height="31" class="BodyText" id="subgroupname_id">
        <input type="text" name="txtsgr_name" id="txtsgr_name" size="40" maxlength="40" class="BodyText" onchange="inputfieldsearch(this.id);">
      </td>

    </tr>
    
    <!-- LE section -->
    <tr bgcolor="#FFCC99" id="le_row" style="display: none;">
      <td height="28" class="BodyText" width="25%" align="left" nowrap>
        LE Code:
      </td>
      <td width="25%" height="31" class="BodyText" id="legroupname_code">
        <input type="text" id="txtle_code" name="txtle_code" size="12" maxlength="8" class="BodyText" onchange="inputfieldsearch(this.id);">
      </td>
      <td width="15%" height="31" class="BodyText" align="right" nowrap>
        LE Name:
      </td>
      <td width="35%" height="31" class="BodyText" id="legroupname_id">
        <input type="text" id="txtle_name" name="txtle_name" size="40" maxlength="40" class="BodyText" onchange="inputfieldsearch(this.id);">
      </td>
    </tr>
    
    <!-- CODRIA fields -->
    <tr bgcolor="#FFCC99" id="codria_row">
      <td height="28" class="BodyText" width="25%" align="left">CODRIA / Reference No.:</td>
      <td colspan="3" align="left">
        <input type="text" id="codria_code" name="codria_code" size="25" maxlength="8" class="BodyText">
      </td>
    </tr>
    
    <!-- CODRIA for LE field -->
    <tr bgcolor="#FFCC99" id="codria_le_row" style="display: none;">
      <td height="28" class="BodyText" width="25%" align="left">CODRIA for LE:</td>
      <td colspan="3" align="left">
        <input type="text" id="codria_le_code" name="codria_le_code" size="25" maxlength="8" class="BodyText">
      </td>
    </tr>
    
    <!-- Select Option Section -->
    <tr bgcolor="#FFCC99">
      <td height="28" class="BodyText" width="25%" align="left" valign="top">
        Select Option:
      </td>
      <td colspan="3" align="left">
        <div class="option-box">
          <div>
            <input type="radio" name="selectOption" id="sub_group_option" value="sub_group" checked onclick="toggleFields()"> Sub-group
          </div>
          <div>
            <input type="radio" name="selectOption" id="le_option" value="le" onclick="toggleFields()"> LE
          </div>
        </div>
      </td>
    </tr>
    
    <tr class="BgWhite"><td colspan="4" height="13">&nbsp;</td></tr>
    
    <tr align="center" valign="middle">
      <td colspan="4" align="center" class="button-container">
        <input type="button" name="fetchCFDetails" id="fetchCFDetails" value="Fetch Details" onclick="javascript:fetchDetails();">
        &nbsp;&nbsp;
        <input type="button" name="cancelButton" id="cancelButton" value="Cancel" onclick="history.back();">
 &nbsp;&nbsp;
    <input type="button" name="resetButton" id="resetButton" value="Reset" onclick="javascript:resetForm();">


      </td>
    </tr>
  </table>
</form>
<script type="text/javascript">
  //... (rest of the JavaScript code remains the same)...

  // Function to reset the form
  function resetForm() {
    // Clear input fields
    document.getElementById('txtsgr_code').value = "";
    document.getElementById('txtsgr_name').value = "";
    document.getElementById('txtle_code').value = "";
    document.getElementById('txtle_name').value = "";
    document.getElementById('codria_code').value = "";
    document.getElementById('codria_le_code').value = "";

    // Enable both Sub-group and LE options
    document.getElementById('sub_group_option').disabled = false;
    document.getElementById('le_option').disabled = false;

    // Restore default display
    document.getElementById('subgroup_row').style.display = '';
    document.getElementById('le_row').style.display = 'none';
    document.getElementById('codria_row').style.display = '';
    document.getElementById('codria_le_row').style.display = 'none';

    // Deselect both radio buttons
    document.getElementById('sub_group_option').checked = true;
    document.getElementById('le_option').checked = false;
  }


function toggleResetButton() {
  var subgroupCode = document.getElementById('txtsgr_code').value;
  var leCode = document.getElementById('txtle_code').value;
  var resetButtonContainer = document.getElementById('resetButtonContainer');
  var resetButton = document.getElementById('resetButton');
  var isLeOptionSelected = document.getElementById('le_option').checked;
  
  if ((subgroupCode!== "" &&!isLeOptionSelected) || (leCode!== "" && isLeOptionSelected)) {
    // Show Reset button if either Sub-group Code or LE Code is entered
    resetButton.style.display = 'inline'; // 'inline' for IE5 compatibility
    resetButtonContainer.style.visibility = 'visible'; // Additional measure for IE5
  } else {
    // Hide Reset button if both Sub-group Code and LE Code are empty
    resetButton.style.display = 'none';
    resetButtonContainer.style.visibility = 'hidden'; // Additional measure for IE5
  }
}

// Call toggleResetButton() on input field changes
document.getElementById('txtsgr_code').onkeyup = toggleResetButton;
document.getElementById('txtle_code').onkeyup = toggleResetButton;

  // Update event listeners for LE Code input field
document.getElementById('txtle_code').onkeyup = function() {
  toggleResetButton();
  // **Also toggle fields to ensure LE row is displayed when entering LE Code**
  if (document.getElementById('le_option').checked) {
    toggleFields();
  }
};

// Initial toggleResetButton() call to set the initial state
toggleResetButton();
</script>
</body>
</html>
